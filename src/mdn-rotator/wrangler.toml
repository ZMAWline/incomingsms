name = "mdn-rotator"
main = "index.js"
compatibility_date = "2024-01-01"
account_id = "5313f8b98e20a8915418b2683ad7278c"

[triggers]
# Daily rotation at 5:00 AM UTC only
crons = ["0 5 * * *"]

# KV namespace for token caching
[[kv_namespaces]]
binding = "TOKEN_CACHE"
id = "edaf2c8828b14badb3037600635f8a7f"

# Queue for processing SIMs in batches
[[queues.producers]]
queue = "mdn-rotation-queue"
binding = "MDN_QUEUE"

[[queues.consumers]]
queue = "mdn-rotation-queue"
max_batch_size = 10
max_retries = 3
max_concurrency = 1

[observability.logs]
enabled = true
invocation_logs = true
